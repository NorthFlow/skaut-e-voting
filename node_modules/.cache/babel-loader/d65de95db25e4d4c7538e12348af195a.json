{"ast":null,"code":"import _objectSpread from \"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/apple/Public/Northflow/e-voting/src/views/TableList/TableListClass.js\";\nimport React, { Component } from \"react\";\nimport Axios from 'axios'; // @material-ui/core components\n\nimport { makeStyles } from \"@material-ui/core/styles\"; // core components\n\nimport GridItem from \"components/Grid/GridItem.js\";\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport Table from \"components/Table/Table.js\";\nimport Card from \"components/Card/Card.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardBody from \"components/Card/CardBody.js\";\nimport MyModal from \"../../components/Modal/MyModal\";\nimport MyModalSimple from \"../../components/Modal/MyModalSImple\";\nimport { ModalManager } from 'react-dynamic-modal';\nimport Combobox from 'react-responsive-combo-box';\nimport { Modal, Effect } from 'react-dynamic-modal';\nimport SquareButton from '../../components/CustomButtons/SquareButton';\nvar styles = {\n  cardCategoryWhite: {\n    \"&,& a,& a:hover,& a:focus\": {\n      color: \"rgba(255,255,255,.62)\",\n      margin: \"0\",\n      fontSize: \"14px\",\n      marginTop: \"0\",\n      marginBottom: \"0\"\n    },\n    \"& a,& a:hover,& a:focus\": {\n      color: \"#FFFFFF\"\n    }\n  },\n  cardTitleWhite: {\n    color: \"#FFFFFF\",\n    marginTop: \"0px\",\n    minHeight: \"auto\",\n    fontWeight: \"300\",\n    fontFamily: \"'Roboto', 'Helvetica', 'Arial', sans-serif\",\n    marginBottom: \"3px\",\n    textDecoration: \"none\",\n    \"& small\": {\n      color: \"#777\",\n      fontSize: \"65%\",\n      fontWeight: \"400\",\n      lineHeight: \"1\"\n    }\n  }\n};\n\nvar TableListClass = /*#__PURE__*/function (_Component) {\n  _inherits(TableListClass, _Component);\n\n  var _super = _createSuper(TableListClass);\n\n  function TableListClass(props) {\n    var _this;\n\n    _classCallCheck(this, TableListClass);\n\n    _this = _super.call(this, props);\n\n    _this.openModal = function (voting_id) {//this.loadQuestionAnswerData(voting_id);\n      //ModalManager.open(<MyModal params={this.state.QandA} onRequestClose={() => true}/>);\n    };\n\n    _this.loadDataAfterSuccessLogin = function () {\n      //Ako krok cislo jedna si nacitame dostupne votingy pre prihlaseneho uzivatela\n      Axios.get('http://localhost:4001/voting/available-votings/' + localStorage.getItem(\"token\")).then(function (res) {\n        _this.setState({\n          Votings: res.data\n        }); //this.loadInitQuestionsData(this.state.Votings[0].id_voting,parseInt(localStorage.getItem(\"token\"),10));\n\n\n        ModalManager.open(\n        /*#__PURE__*/\n        //<MyModalSimple params={this.state.Votings} handleClicked={this.handleChange} onRequestClose={() => false}/>\n        React.createElement(Modal, {\n          onRequestClose: function onRequestClose() {\n            return false;\n          },\n          effect: Effect.SlideFromBottom,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 7\n          }\n        }, _this.state.Votings.map(function (item, index) {\n          return /*#__PURE__*/React.createElement(SquareButton, {\n            key: index,\n            onClick: function onClick() {\n              return _this.handleClick(item.id_voting);\n            },\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 26\n            }\n          }, item.name, \" \");\n        })));\n      })[\"catch\"](function (err) {\n        if (err.response) {\n          //TODO: show error response from server\n          window.alert(err.response.data.message);\n          console.log(err.response.data.message);\n\n          _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n            error: err.response.data.message\n          }));\n        } else if (err.request) {\n          //TODO: msg internet connection..\n          window.alert(\"Internet connection failed.\");\n        } else {\n          //TODO: rly dont know what error can happend here but can happend :D\n          window.alert(\"Something went wrong.\");\n        }\n      });\n    };\n\n    _this.loadInitQuestionsData = function (id_voting, id_user) {\n      var TableParamsNew = {\n        voting_id: id_voting,\n        user_id: id_user\n      };\n\n      _this.setState({\n        TableParams: TableParamsNew\n      });\n\n      console.log(\"----------- tableparams\");\n      console.log(_this.state.TableParams); //Ako krok cislo dva si nacitame otazky votingu na pozicii 0\n\n      Axios.post('http://localhost:4001/questions/get-voting-questions', _this.state.TableParams).then(function (res) {\n        _this.setState({\n          Questions: res.data\n        });\n\n        console.log(\"----- QUESTIONS\");\n        console.log(res.data);\n      })[\"catch\"](function (err) {\n        if (err.response) {\n          //TODO: show error response from server\n          window.alert(err.response.data.message);\n          console.log(err.response.data.message);\n\n          _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n            error: err.response.data.message\n          }));\n        } else if (err.request) {\n          //TODO: msg internet connection..\n          window.alert(\"Internet connection failed.\");\n        } else {\n          //TODO: rly dont know what error can happend here but can happend :D\n          window.alert(\"Something went wrong.\");\n        }\n      });\n    };\n\n    _this.handleClick = function (id_voting) {\n      console.log(\"---------- handleCHange \" + id_voting); //this.loadInitQuestionsData(event.target.value,parseInt(localStorage.getItem(\"token\"),10));\n      //this.setState({value: event.target.value});\n    };\n\n    _this.loadQuestionAnswerData = function (voting_id) {\n      // ----- nacitanie otazok k votingom.\n      Axios.get('http://localhost:4001/questions/qawording/' + voting_id).then(function (res) {\n        //console.log(\"in then\");\n        var tmpArray = [[]];\n\n        for (var i = 0; i < res.data.length; i++) {\n          var dataPom = [JSON.stringify(res.data[i].question), JSON.stringify(res.data[i].wording), JSON.stringify(res.data[i].id_answer), JSON.stringify(res.data[i].answer)]; //console.log(\"riadok> \"+dataPom);\n\n          tmpArray.push(dataPom);\n        }\n\n        console.log(tmpArray);\n\n        _this.setState({\n          QandA: tmpArray\n        }); //console.log(this.state.QandA)\n\n\n        var datas = _this.state.QandA.filter(function (e, i) {\n          return i !== 0;\n        });\n\n        _this.setState({\n          QandA: datas\n        });\n      })[\"catch\"](function (err) {\n        if (err.response) {\n          //TODO: show error response from server\n          window.alert(err.response.data.message);\n          console.log(err.response.data.message);\n\n          _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n            error: err.response.data.message\n          }));\n        } else if (err.request) {\n          //TODO: msg internet connection..\n          window.alert(\"Internet connection failed.\");\n        } else {\n          //TODO: rly dont know what error can happend here but can happend :D\n          window.alert(\"Something went wrong.\");\n        }\n      });\n    };\n\n    _this.state = {\n      classes: makeStyles(styles),\n      Votings: [[]],\n      Questions: [[]],\n      QandA: [[]],\n      value: 'select',\n      TableParams: {\n        voting_id: '',\n        user_id: ''\n      }\n    }; //this.handleClick = this.handleClick.bind(this);\n\n    return _this;\n  }\n\n  _createClass(TableListClass, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadDataAfterSuccessLogin();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(GridContainer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(GridItem, {\n        xs: 12,\n        sm: 12,\n        md: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        style: {\n          background: \"#019ECE\",\n          color: \"white\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: this.state.classes.cardTitleWhite,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }\n      }, \"Hlasovanie mal\\xFD snem 2021\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: this.state.classes.cardCategoryWhite,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }\n      }, \"V tejto tabu\\u013Ek\\xE9 n\\xE1jdete konkr\\xE9tne hlasovania nastaven\\xE9 pre Mal\\xFD snem SLSK 2021.\")), /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Table, {\n        tableHeaderColor: \"primary\",\n        tableHead: [\"Krátky popis\", \"\"],\n        tableData: this.state.Questions,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }\n      })))));\n    }\n  }]);\n\n  return TableListClass;\n}(Component);\n\nexport default TableListClass;","map":{"version":3,"sources":["/Users/apple/Public/Northflow/e-voting/src/views/TableList/TableListClass.js"],"names":["React","Component","Axios","makeStyles","GridItem","GridContainer","Table","Card","CardHeader","CardBody","MyModal","MyModalSimple","ModalManager","Combobox","Modal","Effect","SquareButton","styles","cardCategoryWhite","color","margin","fontSize","marginTop","marginBottom","cardTitleWhite","minHeight","fontWeight","fontFamily","textDecoration","lineHeight","TableListClass","props","openModal","voting_id","loadDataAfterSuccessLogin","get","localStorage","getItem","then","res","setState","Votings","data","open","SlideFromBottom","state","map","item","index","handleClick","id_voting","name","err","response","window","alert","message","console","log","error","request","loadInitQuestionsData","id_user","TableParamsNew","user_id","TableParams","post","Questions","loadQuestionAnswerData","tmpArray","i","length","dataPom","JSON","stringify","question","wording","id_answer","answer","push","QandA","datas","filter","e","classes","value","background"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport Axios from 'axios';\n// @material-ui/core components\nimport { makeStyles } from \"@material-ui/core/styles\";\n// core components\nimport GridItem from \"components/Grid/GridItem.js\";\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport Table from \"components/Table/Table.js\";\nimport Card from \"components/Card/Card.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardBody from \"components/Card/CardBody.js\";\n\n\nimport MyModal from \"../../components/Modal/MyModal\";\nimport MyModalSimple from \"../../components/Modal/MyModalSImple\";\nimport { ModalManager} from 'react-dynamic-modal';\nimport  Combobox  from 'react-responsive-combo-box';\nimport { Modal,Effect} from 'react-dynamic-modal';\nimport SquareButton from '../../components/CustomButtons/SquareButton';\n\nconst styles = {\n  cardCategoryWhite: {\n    \"&,& a,& a:hover,& a:focus\": {\n      color: \"rgba(255,255,255,.62)\",\n      margin: \"0\",\n      fontSize: \"14px\",\n      marginTop: \"0\",\n      marginBottom: \"0\"\n    },\n    \"& a,& a:hover,& a:focus\": {\n      color: \"#FFFFFF\"\n    }\n  },\n  cardTitleWhite: {\n    color: \"#FFFFFF\",\n    marginTop: \"0px\",\n    minHeight: \"auto\",\n    fontWeight: \"300\",\n    fontFamily: \"'Roboto', 'Helvetica', 'Arial', sans-serif\",\n    marginBottom: \"3px\",\n    textDecoration: \"none\",\n    \"& small\": {\n      color: \"#777\",\n      fontSize: \"65%\",\n      fontWeight: \"400\",\n      lineHeight: \"1\"\n    }\n  }\n};\n\nclass  TableListClass extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      classes : makeStyles(styles),\n      Votings : [[]],\n      Questions: [[]],\n      QandA : [[]],\n      value: 'select',\n      TableParams:{\n        voting_id:'',\n        user_id:''\n      }\n    };\n\n    //this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.loadDataAfterSuccessLogin();\n    \n  }\n\n  openModal =(voting_id) =>{\n    //this.loadQuestionAnswerData(voting_id);\n    //ModalManager.open(<MyModal params={this.state.QandA} onRequestClose={() => true}/>);\n }\n\n  loadDataAfterSuccessLogin = () => {\n    //Ako krok cislo jedna si nacitame dostupne votingy pre prihlaseneho uzivatela\n    Axios.get('http://localhost:4001/voting/available-votings/' + localStorage.getItem(\"token\"))\n    .then(res => {\n      this.setState({\n        Votings: res.data\n    })\n    //this.loadInitQuestionsData(this.state.Votings[0].id_voting,parseInt(localStorage.getItem(\"token\"),10));\n    ModalManager.open(\n      //<MyModalSimple params={this.state.Votings} handleClicked={this.handleChange} onRequestClose={() => false}/>\n      <Modal\n            onRequestClose={() => false}\n            effect={Effect.SlideFromBottom}\n            >\n               \n               { this.state.Votings.map((item,index)=>{\n                  return <SquareButton key={index} onClick={() => this.handleClick(item.id_voting)}>{item.name} </SquareButton>\n                  \n               }) }\n               \n         </Modal>\n      );\n    })\n    .catch(err => {\n      if (err.response) {\n        //TODO: show error response from server\n        window.alert(err.response.data.message);\n        \n        console.log(err.response.data.message);\n        this.setState({...this.state,error: err.response.data.message})\n      } else if (err.request) {\n        //TODO: msg internet connection..\n        window.alert(\"Internet connection failed.\");\n      } else {\n          //TODO: rly dont know what error can happend here but can happend :D\n          window.alert(\"Something went wrong.\");\n    }});\n\n  }\n\n  loadInitQuestionsData =(id_voting,id_user) =>{\n    let TableParamsNew = { \n      voting_id:id_voting,\n      user_id:id_user\n     };\n\n    this.setState({\n      TableParams: TableParamsNew\n    });\n    console.log(\"----------- tableparams\");\n    console.log(this.state.TableParams);\n\n    //Ako krok cislo dva si nacitame otazky votingu na pozicii 0\n    Axios.post('http://localhost:4001/questions/get-voting-questions' , this.state.TableParams)\n    .then(res => {\n      this.setState({\n        Questions: res.data,\n    })\n    console.log(\"----- QUESTIONS\");\n    console.log(res.data);\n\n    })\n    .catch(err => {\n      if (err.response) {\n        //TODO: show error response from server\n        window.alert(err.response.data.message);\n        \n        console.log(err.response.data.message);\n        this.setState({...this.state,error: err.response.data.message})\n      } else if (err.request) {\n        //TODO: msg internet connection..\n        window.alert(\"Internet connection failed.\");\n      } else {\n          //TODO: rly dont know what error can happend here but can happend :D\n          window.alert(\"Something went wrong.\");\n    }});\n  }\n\n  handleClick =(id_voting) =>{\n    console.log(\"---------- handleCHange \"+ id_voting);\n    //this.loadInitQuestionsData(event.target.value,parseInt(localStorage.getItem(\"token\"),10));\n\n    //this.setState({value: event.target.value});\n};\n\n  loadQuestionAnswerData = (voting_id) =>{\n    // ----- nacitanie otazok k votingom.\n    Axios.get('http://localhost:4001/questions/qawording/' + voting_id)\n    .then(res => {\n      //console.log(\"in then\");\n      let tmpArray = [[]];\n      for(var i=0; i< res.data.length; i++){\n        var dataPom = [JSON.stringify(res.data[i].question), JSON.stringify(res.data[i].wording),JSON.stringify(res.data[i].id_answer), JSON.stringify(res.data[i].answer)];\n        //console.log(\"riadok> \"+dataPom);\n        tmpArray.push(dataPom);\n      }\n      console.log(tmpArray)\n      this.setState({\n        QandA: tmpArray\n    })\n\n    //console.log(this.state.QandA)\n\n    let datas = this.state.QandA.filter((e, i) => i !== 0);\n    this.setState({ QandA : datas });\n    \n    })\n    .catch(err => {\n      if (err.response) {\n        //TODO: show error response from server\n        window.alert(err.response.data.message);\n        \n        console.log(err.response.data.message);\n        this.setState({...this.state,error: err.response.data.message})\n      } else if (err.request) {\n        //TODO: msg internet connection..\n        window.alert(\"Internet connection failed.\");\n      } else {\n          //TODO: rly dont know what error can happend here but can happend :D\n          window.alert(\"Something went wrong.\");\n    }});\n  }\n  \nrender(){\n  return (\n    <GridContainer>\n      <GridItem xs={12} sm={12} md={12}>\n        <Card >\n\n        \n        \n\n          <CardHeader style={{background: \"#019ECE\", color: \"white\"}}>\n            <h4 className={this.state.classes.cardTitleWhite}>Hlasovanie malý snem 2021</h4>\n            <p className={this.state.classes.cardCategoryWhite}>\n              V tejto tabuľké nájdete konkrétne hlasovania nastavené pre Malý snem SLSK 2021.\n            </p>\n          </CardHeader>\n          <CardBody>\n          <Table\n              tableHeaderColor=\"primary\"\n              tableHead={[\"Krátky popis\", \"\"]}\n              tableData= {this.state.Questions}\n            />\n          </CardBody>\n        </Card>\n      </GridItem>\n      \n    </GridContainer>\n  );\n}\n  \n}\n\n\nexport default TableListClass;"]},"metadata":{},"sourceType":"module"}