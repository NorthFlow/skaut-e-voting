{"ast":null,"code":"import _objectSpread from\"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Axios from'axios';import Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import Link from'@material-ui/core/Link';import Box from'@material-ui/core/Box';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import{Redirect}from\"react-router-dom\";import logo from'assets/img/raise-hand-blue.png';function Copyright(){return/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\"},'Copyright © ',/*#__PURE__*/React.createElement(Link,{color:\"inherit\",href:\"https://skauting.sk/\"},\"Slovensk\\xFD skauting\"),' ',new Date().getFullYear(),'.');}var styles={paper:{display:'flex',flexDirection:'column',alignItems:'center'},avatar:{//margin: theme.spacing(1),\n//backgroundColor: theme.palette.secondary.main,\n},form:{width:'100%'// Fix IE 11 issue.\n//marginTop: theme.spacing(1),\n},submit:{//margin: theme.spacing(3, 0, 2),\nbackgroundColor:\"#019ECE\"}};var LoginClass=/*#__PURE__*/function(_Component){_inherits(LoginClass,_Component);var _super=_createSuper(LoginClass);function LoginClass(props){var _this;_classCallCheck(this,LoginClass);_this=_super.call(this,props);_this.handleFormChange=function(event){var loginParamsNew=_objectSpread({},_this.state.loginParams);var val=event.target.value;loginParamsNew[event.target.name]=val;_this.setState({loginParams:loginParamsNew});};_this.login=function(event){_this.setState({error:''});Axios.post('http://localhost:4001/user/login',_this.state.loginParams).then(function(res){console.log('success login',res.data);localStorage.setItem(\"token\",res.data.id_user);localStorage.setItem(\"user\",JSON.stringify(res.data));console.log(localStorage.getItem(\"token\"));console.log('');_this.loadDataAfterSuccessLogin();}).catch(function(err){if(err.response){//TODO: show error response from server\nwindow.alert(err.response.data.message);console.log(err.response.data.message);_this.setState(_objectSpread(_objectSpread({},_this.state),{},{error:err.response.data.message}));}else if(err.request){//TODO: msg internet connection..\nwindow.alert(\"Internet connection failed.\");}else{//TODO: rly dont know what error can happend here but can happend :D\nwindow.alert(\"Something went wrong with login\");}});event.preventDefault();};_this.loadDataAfterSuccessLogin=function(){_this.setState(_objectSpread(_objectSpread({},_this.state),{},{islogged:true}));window.location.reload();};_this.state={classes:makeStyles(styles),error:null,islogged:false,loginParams:{login:'',password:''}};return _this;}_createClass(LoginClass,[{key:\"render\",value:function render(){if(localStorage.getItem(\"token\")){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\",style:{\"textAlign\":\"center\",\"paddingTop\":\"80px\"}},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(\"div\",{className:this.state.classes.paper},/*#__PURE__*/React.createElement(\"img\",{src:logo,alt:\"logo\",className:this.state.classes.img,style:{\"width\":\"10%\"}}),/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Skautsk\\xFD e-voting\"),/*#__PURE__*/React.createElement(\"form\",{className:this.state.classes.form,noValidate:true,onSubmit:this.login},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"login\",label:\"Emailov\\xE1 adresa\",name:\"login\",autoComplete:\"email\",autoFocus:true,onChange:this.handleFormChange}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Heslo\",type:\"password\",id:\"password\",autoComplete:\"current-password\",onChange:this.handleFormChange}),/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:this.state.classes.submit,style:{\"marginTop\":\"30px\"}},\"Prihl\\xE1si\\u0165 sa\"))),/*#__PURE__*/React.createElement(Box,{mt:8},/*#__PURE__*/React.createElement(Copyright,null)));}}]);return LoginClass;}(Component);export default LoginClass;","map":{"version":3,"sources":["/Users/apple/Public/Northflow/e-voting/src/views/LoginPage/LoginClass.js"],"names":["React","Component","Axios","Button","CssBaseline","TextField","Link","Box","Typography","makeStyles","Container","Redirect","logo","Copyright","Date","getFullYear","styles","paper","display","flexDirection","alignItems","avatar","form","width","submit","backgroundColor","LoginClass","props","handleFormChange","event","loginParamsNew","state","loginParams","val","target","value","name","setState","login","error","post","then","res","console","log","data","localStorage","setItem","id_user","JSON","stringify","getItem","loadDataAfterSuccessLogin","catch","err","response","window","alert","message","request","preventDefault","islogged","location","reload","classes","password","img"],"mappings":"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","sourcesContent":["import React, { Component }  from 'react';\nimport Axios from 'axios'\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\n\nimport {Redirect } from \"react-router-dom\";\nimport logo from 'assets/img/raise-hand-blue.png';\n\nfunction Copyright() {\n  return (\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n      {'Copyright © '}\n      <Link color=\"inherit\" href=\"https://skauting.sk/\">\n        Slovenský skauting\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nconst styles = {\n  paper: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    //margin: theme.spacing(1),\n    //backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    //marginTop: theme.spacing(1),\n  },\n  submit: {\n    //margin: theme.spacing(3, 0, 2),\n    backgroundColor: \"#019ECE\",\n  }\n};\n\n\nclass LoginClass extends Component{\n  constructor(props) {\n\n    super(props);\n    this.state = {\n      classes : makeStyles(styles),\n      error: null,\n      islogged: false,\n      loginParams:{\n        login: '',\n        password: ''\n      }\n    };\n  }\n\n  handleFormChange = event => {\n    let loginParamsNew = { ...this.state.loginParams };\n    let val = event.target.value;\n    loginParamsNew[event.target.name] = val;\n    this.setState({\n      loginParams: loginParamsNew\n    });\n  };\n\n  login = event => {\n    this.setState({ error: '' });\n    Axios.post('http://localhost:4001/user/login', this.state.loginParams)\n      .then(res => {\n        console.log('success login', res.data)\n        \n        localStorage.setItem(\"token\", res.data.id_user);\n        localStorage.setItem(\"user\",  JSON.stringify(res.data));\n        console.log(localStorage.getItem(\"token\"));\n        console.log('');\n        this.loadDataAfterSuccessLogin();\n      })\n      .catch(err => {\n        if (err.response) {\n          //TODO: show error response from server\n          window.alert(err.response.data.message);\n          console.log(err.response.data.message);\n          this.setState({...this.state,error: err.response.data.message})\n        } else if (err.request) {\n          //TODO: msg internet connection..\n          window.alert(\"Internet connection failed.\");\n        } else {\n          //TODO: rly dont know what error can happend here but can happend :D\n          window.alert(\"Something went wrong with login\");\n      }});\n      event.preventDefault();\n  };\n\n  loadDataAfterSuccessLogin = () => {\n    this.setState({\n      ...this.state,\n      islogged: true\n    });\n    window.location.reload();\n  }\n\n  render() {  \n    if ( localStorage.getItem(\"token\") ) {\n      return <Redirect to=\"/\" />\n    }\n\n    return (\n      <Container component=\"main\" maxWidth=\"xs\" style={{\"textAlign\" : \"center\", \"paddingTop\" : \"80px\"}}>\n        <CssBaseline />\n        <div className={this.state.classes.paper} >\n          <img src={logo} alt=\"logo\" className={this.state.classes.img} style={{\"width\" : \"10%\"}} />\n          <Typography component=\"h1\" variant=\"h5\" >\n            Skautský e-voting\n          </Typography>\n          <form className={this.state.classes.form} noValidate onSubmit={this.login}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"login\"\n              label=\"Emailová adresa\"\n              name=\"login\"\n              autoComplete=\"email\"\n              autoFocus\n\n              onChange={this.handleFormChange}\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Heslo\"\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n\n              onChange={this.handleFormChange}\n            />\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={this.state.classes.submit}\n\n              style={{\"marginTop\" : \"30px\"}}\n            >\n              Prihlásiť sa\n            </Button>\n\n          </form>\n        </div>\n        <Box mt={8}>\n          <Copyright />\n        </Box>\n      </Container>\n    );}\n\n}\n\n\nexport default LoginClass;"]},"metadata":{},"sourceType":"module"}