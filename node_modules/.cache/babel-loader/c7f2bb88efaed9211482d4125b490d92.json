{"ast":null,"code":"import _objectSpread from \"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/apple/Public/Northflow/e-voting/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/apple/Public/Northflow/e-voting/src/components/Modal/MyModal.js\";\nimport React, { Component } from 'react';\nimport { Modal, Effect } from 'react-dynamic-modal';\nimport SquareButton from '../CustomButtons/SquareButton';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport ChartistGraph from \"react-chartist\";\nimport './Modal.css';\nimport Axios from 'axios'; // core components\n\nimport Card from \"../Card/Card\";\nimport CardHeader from \"../Card/CardHeader.js\";\nimport { questionStatsParams } from \"../../variables/charts\";\nvar styles = {\n  overlay: {\n    position: 'relative',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    zIndex: 99999999,\n    overflowY: 'scroll',\n    height: '500px',\n    backgroundColor: 'rgba(0, 0, 0, 0.3)'\n  },\n  content: {\n    position: 'relative',\n    margin: '15% auto',\n    width: '50%',\n    border: '1px solid rgba(0, 0, 0, .2)',\n    background: '#fff',\n    overflowY: 'scroll',\n    borderRadius: '4px',\n    outline: 'none',\n    boxShadow: '0 5px 10px rgba(0, 0, 0, .3)'\n  }\n};\n\nvar MyModal = /*#__PURE__*/function (_Component) {\n  _inherits(MyModal, _Component);\n\n  var _super = _createSuper(MyModal);\n\n  function MyModal(props) {\n    var _this;\n\n    _classCallCheck(this, MyModal);\n\n    _this = _super.call(this, props);\n\n    _this.handleClick = function (answer_id, quest_id, is_secret) {\n      //onRequestClose\n      //console.log(\"CLICKED \"+answer_id)\n      //pouzijeme ak je volba NEtajna\n      var SetVoteParamsNew = {\n        answer_id: answer_id,\n        question_id: quest_id,\n        user_id: parseInt(localStorage.getItem(\"token\"), 10)\n      };\n      var SetMarkVotedParamsNew = {\n        user_id: parseInt(localStorage.getItem(\"token\"), 10),\n        question_id: quest_id\n      }; //pouzijeme ak je volba TAJNA\n\n      var SetVoteParamsNew_tajna = {\n        answer_id: answer_id,\n        question_id: quest_id,\n        user_id: null\n      }; //console.log(\"is secret:\"+is_secret)\n\n      if (is_secret === 1) {\n        console.log(SetVoteParamsNew_tajna);\n        Axios.post('/voting/set-vote', SetVoteParamsNew_tajna).then(function (res) {\n          console.log(\"SET VOTE DONE\"); //console.log(res.results)\n          //ak toto preslo ok tak ulozime este info ze uzivatel hlasoval\n\n          Axios.post('/voting/set-mark-voted', SetMarkVotedParamsNew).then(function (res) {\n            console.log(\"SET MARK VOTED DONE\");\n            console.log(res.results);\n            window.location.reload(false);\n          })[\"catch\"](function (err) {\n            if (err.response) {\n              //TODO: show error response from server\n              window.alert(err.response.data.message);\n              console.log(err.response.data.message);\n\n              _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n                error: err.response.data.message\n              }));\n            } else if (err.request) {\n              //TODO: msg internet connection..\n              window.alert(\"Internet connection failed.\");\n            } else {\n              //TODO: rly dont know what error can happend here but can happend :D\n              window.alert(\"Something went wrong.\");\n            }\n          });\n        })[\"catch\"](function (err) {\n          if (err.response) {\n            //TODO: show error response from server\n            window.alert(err.response.data.message);\n            console.log(err.response.data.message);\n\n            _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n              error: err.response.data.message\n            }));\n          } else if (err.request) {\n            //TODO: msg internet connection..\n            window.alert(\"Internet connection failed.\"); //console.log(\"internte connection failed\");\n          } else {\n            //TODO: rly dont know what error can happend here but can happend :D\n            window.alert(\"Something went wrong.\"); //console.log(\"something went wrong?!\");\n          }\n        });\n      } else {\n        console.log(SetVoteParamsNew);\n        Axios.post('/voting/set-vote', SetVoteParamsNew).then(function (res) {\n          //console.log(\"SET VOTE DONE\");\n          console.log(res.results); //ak toto preslo ok tak ulozime este info ze uzivatel hlasoval\n\n          Axios.post('/voting/set-mark-voted', SetMarkVotedParamsNew).then(function (res) {\n            //console.log(\"SET MARK VOTED DONE\");\n            console.log(res.results);\n            window.location.reload(false);\n          })[\"catch\"](function (err) {\n            if (err.response) {\n              //TODO: show error response from server\n              window.alert(err.response.data.message);\n\n              _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n                error: err.response.data.message\n              }));\n            } else if (err.request) {\n              //TODO: msg internet connection..\n              window.alert(\"Internet connection failed.\");\n            } else {\n              //TODO: rly dont know what error can happend here but can happend :D\n              window.alert(\"Something went wrong.\");\n            }\n          });\n        })[\"catch\"](function (err) {\n          if (err.response) {\n            //TODO: show error response from server\n            window.alert(err.response.data.message);\n            console.log(err.response.data.message);\n\n            _this.setState(_objectSpread(_objectSpread({}, _this.state), {}, {\n              error: err.response.data.message\n            }));\n          } else if (err.request) {\n            //TODO: msg internet connection..\n            window.alert(\"Internet connection failed.\");\n          } else {\n            //TODO: rly dont know what error can happend here but can happend :D\n            window.alert(\"Something went wrong.\");\n          }\n        });\n      }\n    };\n\n    _this.state = {\n      statData: [[]],\n      classes: makeStyles(styles),\n      SetVoteParams: {\n        answer_id: '',\n        question_id: '',\n        voting_id: '',\n        user_id: ''\n      },\n      SetMarkVotedParams: {\n        question_id: '',\n        user_id: ''\n      }\n    };\n    return _this;\n  }\n\n  _createClass(MyModal, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          statsData = _this$props.statsData,\n          secret = _this$props.secret,\n          otv = _this$props.otv,\n          otazka_id = _this$props.otazka_id,\n          hlavicka = _this$props.hlavicka,\n          odpovede = _this$props.odpovede,\n          parametre = _this$props.parametre,\n          onRequestClose = _this$props.onRequestClose; //console.log(hlavicka[0].name)\n      //console.log(\" /// odpovede\")\n      //console.log(odpovede)\n      //console.log(parametre)\n      //console.log(\"------ stats data in modal\")\n      //console.log(statsData);\n      //console.log(\"otvorene: \"+otv)\n\n      if (otv === 'Áno') {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Modal, {\n          onRequestClose: onRequestClose,\n          effect: Effect.SlideFromBottom,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 16\n          }\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          className: \"h3-custom\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 22\n          }\n        }, hlavicka[0].name, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"h5-custom\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 22\n          }\n        }, hlavicka[0].wording, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            paddingBottom: '40px'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 22\n          }\n        }, odpovede.map(function (item, index) {\n          return /*#__PURE__*/React.createElement(SquareButton, {\n            key: index,\n            clicked: function clicked() {\n              return _this2.handleClick(item.id_answer, otazka_id, secret);\n            },\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 32\n            }\n          }, item.answer, \" \");\n        }))));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(Modal, {\n          onRequestClose: onRequestClose,\n          effect: Effect.SlideFromBottom,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 16\n          }\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          className: \"h3-custom\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 19\n          }\n        }, hlavicka[0].name, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"h5-custom\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 19\n          }\n        }, hlavicka[0].wording, \" \"), /*#__PURE__*/React.createElement(Card, {\n          chart: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(CardHeader, {\n          color: \"warning\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 22\n          }\n        }, /*#__PURE__*/React.createElement(ChartistGraph, {\n          className: \"ct-chart\",\n          data: statsData,\n          type: \"Bar\",\n          options: questionStatsParams.options,\n          responsiveOptions: questionStatsParams.responsiveOptions,\n          listener: questionStatsParams.animation,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 22\n          }\n        })))));\n      }\n    }\n  }]);\n\n  return MyModal;\n}(Component);\n\nexport default MyModal;","map":{"version":3,"sources":["/Users/apple/Public/Northflow/e-voting/src/components/Modal/MyModal.js"],"names":["React","Component","Modal","Effect","SquareButton","makeStyles","ChartistGraph","Axios","Card","CardHeader","questionStatsParams","styles","overlay","position","top","left","right","bottom","zIndex","overflowY","height","backgroundColor","content","margin","width","border","background","borderRadius","outline","boxShadow","MyModal","props","handleClick","answer_id","quest_id","is_secret","SetVoteParamsNew","question_id","user_id","parseInt","localStorage","getItem","SetMarkVotedParamsNew","SetVoteParamsNew_tajna","console","log","post","then","res","results","window","location","reload","err","response","alert","data","message","setState","state","error","request","statData","classes","SetVoteParams","voting_id","SetMarkVotedParams","statsData","secret","otv","otazka_id","hlavicka","odpovede","parametre","onRequestClose","textAlign","SlideFromBottom","name","wording","paddingBottom","map","item","index","id_answer","answer","options","responsiveOptions","animation"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport { Modal,Effect} from 'react-dynamic-modal';\nimport SquareButton from '../CustomButtons/SquareButton';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport ChartistGraph from \"react-chartist\";\nimport './Modal.css';\nimport Axios from 'axios';\n\n// core components\nimport Card from \"../Card/Card\";\nimport CardHeader from \"../Card/CardHeader.js\";\n\nimport {\n   questionStatsParams\n } from \"../../variables/charts\";\n \nconst styles = {\n   overlay: {\n      position        : 'relative',\n      top             : 0,\n      left            : 0,\n      right           : 0,\n      bottom          : 0,\n      zIndex          : 99999999,\n      overflowY       : 'scroll',\n      height          : '500px',\n      backgroundColor : 'rgba(0, 0, 0, 0.3)'\n    },\n  \n    content: {\n      position                : 'relative',\n      margin                  : '15% auto',\n      width                   : '50%',\n      border                  : '1px solid rgba(0, 0, 0, .2)',\n      background              : '#fff',\n      overflowY               : 'scroll',\n      borderRadius            : '4px',\n      outline                 : 'none',\n      boxShadow               : '0 5px 10px rgba(0, 0, 0, .3)',\n      \n    }\n };\n\n\nclass MyModal extends Component{\n   constructor(props) {\n      super(props);\n  \n      this.state = {\n         statData:[[]],\n        classes : makeStyles(styles),\n        SetVoteParams:{\n         answer_id:'',\n         question_id:'',\n         voting_id:'',\n         user_id:''\n       },\n       SetMarkVotedParams:{\n        question_id:'',\n        user_id:''\n      },\n      }\n    }\n    \n\n    handleClick=(answer_id,quest_id,is_secret)=>{\n      //onRequestClose\n      //console.log(\"CLICKED \"+answer_id)\n\n      //pouzijeme ak je volba NEtajna\n      let SetVoteParamsNew = { \n         answer_id:answer_id,\n         question_id:quest_id,\n         user_id:parseInt(localStorage.getItem(\"token\"),10)\n        };\n        let SetMarkVotedParamsNew = { \n         user_id:parseInt(localStorage.getItem(\"token\"),10),\n         question_id:quest_id\n        };\n      //pouzijeme ak je volba TAJNA\n      let SetVoteParamsNew_tajna = { \n         answer_id:answer_id,\n         question_id:quest_id,\n         user_id:null\n         };\n         //console.log(\"is secret:\"+is_secret)\n\n         if(is_secret===1){\n            console.log(SetVoteParamsNew_tajna)\n\n            Axios.post('/voting/set-vote' , SetVoteParamsNew_tajna)\n            .then(res => {\n               console.log(\"SET VOTE DONE\");\n               //console.log(res.results)\n            //ak toto preslo ok tak ulozime este info ze uzivatel hlasoval\n         \n            Axios.post('/voting/set-mark-voted' , SetMarkVotedParamsNew)\n            .then(res => {\n               console.log(\"SET MARK VOTED DONE\");\n               console.log(res.results)\n               window.location.reload(false);\n         \n            })\n            .catch(err => {\n               if (err.response) {\n               //TODO: show error response from server\n               window.alert(err.response.data.message);\n               \n               console.log(err.response.data.message);\n               this.setState({...this.state,error: err.response.data.message})\n               } else if (err.request) {\n               //TODO: msg internet connection..\n               window.alert(\"Internet connection failed.\");\n               } else {\n                  //TODO: rly dont know what error can happend here but can happend :D\n                  window.alert(\"Something went wrong.\");\n            }});\n            })\n            .catch(err => {\n               if (err.response) {\n               //TODO: show error response from server\n               window.alert(err.response.data.message);\n               \n               console.log(err.response.data.message);\n               this.setState({...this.state,error: err.response.data.message})\n               } else if (err.request) {\n               //TODO: msg internet connection..\n               window.alert(\"Internet connection failed.\");\n               //console.log(\"internte connection failed\");\n               } else {\n                  //TODO: rly dont know what error can happend here but can happend :D\n                  window.alert(\"Something went wrong.\");\n                  //console.log(\"something went wrong?!\");\n            }});\n            \n         }else{\n            console.log(SetVoteParamsNew)\n            Axios.post('/voting/set-vote' , SetVoteParamsNew)\n            .then(res => {\n               //console.log(\"SET VOTE DONE\");\n               console.log(res.results)\n            //ak toto preslo ok tak ulozime este info ze uzivatel hlasoval\n         \n            Axios.post('/voting/set-mark-voted' , SetMarkVotedParamsNew)\n            .then(res => {\n               //console.log(\"SET MARK VOTED DONE\");\n               console.log(res.results)\n         \n               window.location.reload(false);\n         \n            })\n            .catch(err => {\n               if (err.response) {\n               //TODO: show error response from server\n               window.alert(err.response.data.message);\n               this.setState({...this.state,error: err.response.data.message})\n               } else if (err.request) {\n               //TODO: msg internet connection..\n               window.alert(\"Internet connection failed.\");\n               } else {\n                  //TODO: rly dont know what error can happend here but can happend :D\n                  window.alert(\"Something went wrong.\");\n            }});\n            })\n            .catch(err => {\n               if (err.response) {\n               //TODO: show error response from server\n               window.alert(err.response.data.message);\n               \n               console.log(err.response.data.message);\n               this.setState({...this.state,error: err.response.data.message})\n               } else if (err.request) {\n               //TODO: msg internet connection..\n               window.alert(\"Internet connection failed.\");\n               } else {\n                  //TODO: rly dont know what error can happend here but can happend :D\n                  window.alert(\"Something went wrong.\");\n            }});\n         }\n       \n         \n    }\n\n   render(){\n      const { statsData,secret,otv,otazka_id,hlavicka,odpovede,parametre, onRequestClose } = this.props;\n      //console.log(hlavicka[0].name)\n      //console.log(\" /// odpovede\")\n      //console.log(odpovede)\n      //console.log(parametre)\n      //console.log(\"------ stats data in modal\")\n      //console.log(statsData);\n      //console.log(\"otvorene: \"+otv)\n           \n      if(otv==='Áno'){\n\n         return (\n            <div style={{textAlign: 'center'}}>\n               <Modal\n               onRequestClose={onRequestClose}\n               effect={Effect.SlideFromBottom}\n               >\n                     <h3 className='h3-custom'>{ hlavicka[0].name } </h3>\n                     <p className='h5-custom'>{ hlavicka[0].wording } </p>\n\n                     <div style={{paddingBottom: '40px'}}>\n                     {odpovede.map((item,index)=>{\n                        return <SquareButton key={index} clicked={() => this.handleClick(item.id_answer,otazka_id,secret)}>{item.answer } </SquareButton>\n                     }\n                     )}\n                     </div>\n                  \n               </Modal>\n            </div>\n\n            \n         );\n      }else{\n         return(\n            <div style={{textAlign: 'center'}}>\n               <Modal\n               onRequestClose={onRequestClose}\n               effect={Effect.SlideFromBottom}\n               >\n                  <h3 className='h3-custom'>{ hlavicka[0].name } </h3>\n                  <p className='h5-custom'>{ hlavicka[0].wording } </p>\n\n                  <Card chart>\n                     <CardHeader color=\"warning\">\n                     <ChartistGraph\n                        className=\"ct-chart\"\n                        data={statsData}\n                        type=\"Bar\"\n                        options={questionStatsParams.options}\n                        responsiveOptions={questionStatsParams.responsiveOptions}\n                        listener={questionStatsParams.animation}\n                     />\n                     </CardHeader>\n                  </Card>\n\n            </Modal>\n            </div>\n            \n         )\n      }\n               \n   }\n}\n\nexport default MyModal;"]},"metadata":{},"sourceType":"module"}